<!DOCTYPE html>
<html>
<head>
	<title>demo</title>
</head>
<body>
    <video id="video" width="320" height="240" autoplay></video>
    <button id='snap'>take a photo</button>
    <canvas id='canv' width="320" height="240"></canvas>
    <script>
    	var obj={
    		video:document.getElementById('video'),
    		canvas:document.getElementById('canv'),
    		btn:document.getElementById('snap'),
		style:'rgba(0，0，0,0.5)',
    		text:'我们的时光',
    		width:320,
    		height:240,
    		draw:function(){
    			var self=this;
    			var context=self.canvas.getContext('2d');
    			context.drawImage(self.video,0,0,self.width,self.height);
			context.fillStyle=self.style;
    			context.fillText(self.text,self.width-160,self.height-10);
    		},
    		bind:function(){
    			var self=this;
    			self.btn.addEventListener('click',function(){
    				self.draw();
    			});
    		},
    		init:function(){
    			var video=this.video;
    			navigator.mediaDevices.getUserMedia({video:true}).then(function(stream){
    				video.src=window.URL.createObjectURL(stream);
    				video.play();
    			});
    			this.bind();
    		}
    	};
        obj.init();
    </script>
</body>
</html>
